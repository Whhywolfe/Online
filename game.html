<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <title>गेम लगाओ - SATTA BAZAAR</title>
</head>
<body>
  <h2>गेम लगाओ</h2>

  <p>बैलेंस: ₹<span id="balance">0</span></p>

  <select id="game">
    <option value="">-- गेम चुनें --</option>
    <option value="Gali">गली</option>
    <option value="Desawar">देशावर</option>
    <option value="Faridabad">फरीदाबाद</option>
    <option value="Ghaziabad">गाज़ियाबाद</option>
  </select><br><br>

  <input type="text" id="number" placeholder="नंबर"><br>
  <input type="number" id="amount" placeholder="अमाउंट"><br>
  <button onclick="placeBet()">गेम लगाओ</button>

  <script>
    const phone = localStorage.getItem("phone");
    const userKey = "user_" + phone;
    const user = JSON.parse(localStorage.getItem(userKey)) || { balance: 0, history: [] };

    document.getElementById("balance").innerText = user.balance;

    function placeBet() {
      const game = document.getElementById("game").value;
      const number = document.getElementById("number").value;
      const amount = parseInt(document.getElementById("amount").value);

      if (!game || !number || isNaN(amount) || amount <= 0) {
        alert("कृपया सभी जानकारी सही से भरें");
        return;
      }

      if (user.balance < amount) {
        alert("आपके पास पर्याप्त बैलेंस नहीं है");
        return;
      }

      // बैलेंस कटाना
      user.balance -= amount;

      // गेम डिटेल्स सेव करना
      const bet = {
        gameName: game,
        number: number,
        amount: amount,
        time: new Date().toLocaleString()
      };

      user.history.push(bet);

      // localStorage में सेव करना
      localStorage.setItem(userKey, JSON.stringify(user));

      alert("आपका गेम लग गया है!");

      // UI अपडेट
      document.getElementById("balance").innerText = user.balance;
      document.getElementById("number").value = "";
      document.getElementById("amount").value = "";
      document.getElementById("game").value = "";
    }
  </script>
</body>
</html>
